#!/bin/bash

# Integrated Pipeline Test Runner
# This script runs the integrated test combining textToJson and alignToSpec

echo "ðŸ§ª Running Integrated Pipeline Test (textToJson â†’ alignToSpec)..."
echo ""

# Change to the app directory to ensure correct paths
cd "$(dirname "$0")/../.."

# Ensure TypeScript files are compiled
echo "ðŸ“¦ Compiling TypeScript files..."
npx tsc src/function/textToJson/textToJson.ts --outDir dist --module esnext --target es2020 --moduleResolution node
npx tsc src/function/alignToSpec/alignToSpec.ts --outDir dist --module esnext --target es2020 --moduleResolution node

echo ""
echo "ðŸš€ Starting integrated test..."
echo ""

# Run the integrated test
node src/tests/test1.js

echo ""
echo "âœ¨ Test execution completed!"